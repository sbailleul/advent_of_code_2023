name: Rust

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:
     inputs:
      challenge_id:
        description: 'Challenge id'
        required: true
        default: '1'
        type: string
      step:
        description: 'Step'
        required: true
        default: '1'
        type: string
        
env:
  CARGO_TERM_COLOR: always

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Print inputs
      run: echo challenge_id => $inputs.challenge_id , step => $inputs.step
    - name: Build
      run: cargo build --verbose
    - name: Run tests
      run: cargo run -- --file-path $(pwd)/inputs/challenge${{ inputs.challenge_id }}.txt --challenge-id ${{ inputs.challenge_id }} --step ${{ inputs.step }}
